{% extends "base.html" %}

{% block title %}Restaurant Details - {{ restaurant.name }}{% endblock %}

{% block content %}
<!-- Header Section -->
<div class="header">
    <div class="logo">
        <i class="fas fa-utensils"></i>
    </div>
    <h1>Restaurant Roulette</h1>
    <p>Spin to find your perfect meal</p>
</div>

<!-- Restaurant Details Card -->
<div class="main-content">
    <div class="restaurant-detail-card">
        <div class="restaurant-header">
            <div class="restaurant-name">{{ restaurant.name }}</div>
            <div class="price-badge">{{ restaurant.price_range }}</div>
        </div>
        
        <div class="rating">
            <div class="stars">{{ stars }}</div>
            <div class="rating-text">{{ restaurant.rating }} ({{ restaurant.review_count }} reviews)</div>
        </div>
        
        <div class="details-section">
            <h5><i class="fas fa-file-alt"></i> Details</h5>
            <div class="detail-item">
                <i class="fas fa-map-marker-alt"></i>
                <span>{{ restaurant.address }}</span>
            </div>
            <div class="detail-item">
                <i class="fas fa-phone"></i>
                <span>{{ restaurant.phone }}</span>
            </div>
            <div class="detail-item">
                <i class="fas fa-utensils"></i>
                <span>Cuisine: <span class="highlight-orange">{{ restaurant.cuisine }}</span></span>
            </div>
            <div class="detail-item">
                <i class="fas fa-heart"></i>
                <span>Mood: <span class="highlight-blue">{{ mood }}</span></span>
            </div>
            <div class="detail-item">
                <i class="fas fa-star"></i>
                <span>Vibe: <span class="highlight-green">Upscale</span></span>
            </div>
        </div>
        
        <div class="about-section">
            <h5><i class="fas fa-comment"></i> About</h5>
            <p>{{ restaurant.mood_match }}</p>
        </div>
        
        <div class="reviews-section">
            <h5><i class="fas fa-star"></i> Reviews</h5>
            <div class="review-card">
                <div class="review-source">Google</div>
                <div class="review-stars">★★★★★</div>
                <div class="review-date">2024-01-08</div>
                <div class="review-text">"{{ restaurant.reviews[0].text }}"</div>
                <div class="review-author">— {{ restaurant.reviews[0].user_name }}</div>
            </div>
        </div>
        
        <div class="action-buttons">
            <button class="btn btn-secondary" onclick="spinAgain()">
                <i class="fas fa-redo"></i>
                SPIN AGAIN
            </button>
            <button class="btn btn-primary">
                <i class="fas fa-map-marker-alt"></i>
                DIRECTIONS
            </button>
            <button class="btn btn-info">
                <i class="fas fa-phone"></i>
                CALL
            </button>
        </div>
    </div>
</div>

<!-- Navigation -->
<div class="text-center mt-4">
    <a href="/" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i>
        New Search
    </a>
</div>
{% endblock %}

{% block scripts %}
<script>
function spinAgain() {
    // Get the current search parameters from session storage or URL
    const location = sessionStorage.getItem('searchLocation') || 'New York City, NY';
    const mood = sessionStorage.getItem('searchMood') || 'upscale and elegant';
    
    // Redirect back to roulette page
    window.location.href = `/roulette?location=${encodeURIComponent(location)}&mood=${encodeURIComponent(mood)}`;
}

// Store search parameters when page loads
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const location = urlParams.get('location');
    const mood = urlParams.get('mood');
    
    if (location) sessionStorage.setItem('searchLocation', location);
    if (mood) sessionStorage.setItem('searchMood', mood);
});
</script>

<style>
.restaurant-detail-card {
    background: #2D2D2D;
    border-radius: 20px;
    padding: 40px;
    border: 2px solid #FFD700;
    box-shadow: 0 20px 40px rgba(255, 215, 0, 0.1);
    position: relative;
}

.restaurant-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 2px solid #404040;
}

.restaurant-name {
    font-size: 2.5rem;
    font-weight: 800;
    color: white;
}

.price-badge {
    background: #E91E63;
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: 700;
    font-size: 1.1rem;
}

.rating {
    display: flex;
    align-items: center;
    margin: 20px 0;
    padding: 15px 0;
    border-bottom: 1px solid #404040;
}

.stars {
    color: #FFD700;
    font-size: 1.5rem;
    margin-right: 15px;
}

.rating-text {
    color: #4CAF50;
    font-weight: 600;
    font-size: 1.1rem;
}

.details-section, .about-section, .reviews-section {
    margin: 30px 0;
    padding: 20px 0;
    border-bottom: 1px solid #404040;
}

.details-section h5, .about-section h5, .reviews-section h5 {
    color: white;
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
}

.details-section h5 i, .about-section h5 i, .reviews-section h5 i {
    margin-right: 10px;
    font-size: 1.1rem;
}

.details-section h5 i {
    color: white;
}

.about-section h5 i {
    color: white;
}

.reviews-section h5 i {
    color: #FFD700;
}

.detail-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    font-size: 1.1rem;
}

.detail-item i {
    margin-right: 15px;
    width: 25px;
    font-size: 1.2rem;
}

.detail-item i.fa-map-marker-alt { color: #E91E63; }
.detail-item i.fa-phone { color: #4CAF50; }
.detail-item i.fa-utensils { color: #9C27B0; }
.detail-item i.fa-heart { color: #2196F3; }
.detail-item i.fa-star { color: #FF9800; }

.highlight-orange { color: #FF9800; }
.highlight-blue { color: #2196F3; }
.highlight-green { color: #4CAF50; }

.about-section p {
    color: #B0B0B0;
    font-size: 1.1rem;
    line-height: 1.6;
    font-style: italic;
}

.review-card {
    background: #1A1A1A;
    border-radius: 15px;
    padding: 25px;
    border-left: 4px solid #4CAF50;
}

.review-source {
    color: #4CAF50;
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 10px;
}

.review-stars {
    color: #FFD700;
    font-size: 1.2rem;
    margin-bottom: 10px;
}

.review-date {
    color: #B0B0B0;
    font-size: 0.9rem;
    text-align: right;
    margin-bottom: 15px;
}

.review-text {
    color: white;
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 15px;
    font-style: italic;
}

.review-author {
    color: #4CAF50;
    font-weight: 600;
    font-size: 1rem;
}

.action-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 40px;
    padding-top: 30px;
    border-top: 2px solid #404040;
}

.btn {
    padding: 15px 30px;
    border: none;
    border-radius: 10px;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    min-width: 150px;
    justify-content: center;
}

.btn-primary {
    background: #4CAF50;
    color: white;
}

.btn-primary:hover {
    background: #45A049;
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(76, 175, 80, 0.3);
}

.btn-secondary {
    background: #E91E63;
    color: white;
}

.btn-secondary:hover {
    background: #C2185B;
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(233, 30, 99, 0.3);
}

.btn-info {
    background: #2196F3;
    color: white;
}

.btn-info:hover {
    background: #1976D2;
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(33, 150, 243, 0.3);
}

.btn i {
    margin-right: 10px;
    font-size: 1.2rem;
}

/* Responsive Design */
@media (max-width: 768px) {
    .restaurant-detail-card {
        padding: 20px;
    }
    
    .restaurant-name {
        font-size: 2rem;
    }
    
    .restaurant-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }
    
    .action-buttons {
        flex-direction: column;
    }
    
    .btn {
        width: 100%;
    }
}
</style>
{% endblock %}
